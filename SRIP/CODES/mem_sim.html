<!DOCTYPE html>
<html>
<head>
	<title>VM simulator</title>
	<link rel="stylesheet" type="text/css" href="LIBRARIES/grid_view1.css">
	<style type="text/css">
		#vm,#mm,#ppn,#vpn,#valid,#dirty{
			background-color: lightgray;
			width : 62px;
			height : 300px;
			overflow: scroll;
		}
		.truncate_virtualmem{
			max-width:80%;
  			display:inline-block;
  			white-space:nowrap;
  			overflow:hidden;
  			text-overflow:ellipsis;
		}
		.truncate_mainmem{
			max-width:40%;
  			display:inline-block;
  			white-space:nowrap;
  			overflow:hidden;
  			text-overflow:ellipsis;
		}
		.truncate_pagesize{
			max-width:60%;
  			display:inline-block;
  			white-space:nowrap;
  			overflow:hidden;
  			text-overflow:ellipsis;
		}
		.truncate_replacementpolicy{
			max-width:20%;
  			display:inline-block;
  			white-space:nowrap;
  			overflow:hidden;
  			text-overflow:ellipsis;
		}
		.truncate_pagelevel{	
			max-width:15%;
  			display:inline-block;
  			white-space:nowrap;
  			overflow:hidden;
  			text-overflow:ellipsis;
		}
		input[type=text] {
		  width: 70%;
		}
		.one{
			display:grid;
			grid-template-columns: 20% 50% 30%;
			grid-gap: 10px;
			background-color: #2196F3;
			padding: 10px;
		}
		.two{
			display:grid;
			grid-template-rows: auto auto auto;
			grid-gap: 5px;
			background-color: #2196F3;
			padding: 5px;
		}
		.three_1{
			display:grid;
			grid-template-rows: auto auto auto auto;
			grid-gap: 5px;
			background-color: #f2f2f2;
			padding: 10px;
		}
		#s-2{
			display: grid;
			grid-template-columns: auto auto auto;
		}
		#s-1{
			display: grid;
			grid-template-columns: auto auto;
		}
		.two_2{
			display: grid;
			grid-template-columns: 40% 40% 20%;
			grid-template-rows:auto auto auto;
 		 	grid-gap: 2px;
  			background-color:  rgba(255, 255, 255, 0.8);
			padding: 5px;
		}
		#s-2{
			display: grid;
			grid-template-columns: auto auto auto;
			grid-gap:5px;
		}
		.item1{
			grid-column: 1;
  			grid-row: 1;
		}
		.item2{
			grid-column: 2;
  			grid-row: 1;
		}
		.item3{
			grid-column: 3;
  			grid-row: 1;
		}
		.item4{
			grid-column: 1/ span 3;
  			grid-row: 2;
		}
		.item5{
			grid-column: 1/span 3;
			grid-row: 3;
		}
		.three_2_2{

			display: grid;
			grid-template-columns: 13% 26% 20% 41%;
  			grid-gap: 10px;
  			background-color: white;
  			padding: 10px;
		}
	</style>
	<script>
		var pg,mm,vm;
		var rep,pg_l;
		function get_parameters(){//sets the values selected by users to right hand field after submit button is clicked 
			var pg_size=document.getElementById("field_1").elements[0].value;
			var mm_size=document.getElementById("field_1").elements[1].value;
			var vm_size=document.getElementById("field_1").elements[2].value;
			var tlb=document.getElementById("field_1").elements[3].value;
			var rep_policy=document.getElementById("field_1").elements[4].value;
			var pg_lvl=document.getElementById("field_1").elements[5].value;
			pg=document.getElementById('pg_size');
		    pg.value = pg_size;
		    mm=document.getElementById('mm_size');
		    mm.value = mm_size;
		    vm=document.getElementById('vm_size');
		    vm.value = vm_size;
		    rep=document.getElementById('rep_policy');
		    rep.value = rep_policy;
		    pg_l=document.getElementById('pg_lvl');
		    pg_l.value = pg_lvl;
		    vm= parseInt(vm_size.slice(0,vm_size.length-3));
		    mm= parseInt(mm_size.slice(0,mm_size.length-3));
		    pg= parseInt(pg_size.slice(0,vm_size.length-3));
		    var size=vm / pg;
		    add_vm(size);
		    add_vpn(size);
		}
		function generate() { //function to generate hex value 
		  var z = vm*1024;
		  var pg_size = pg*1024;
		  pg_size = pg_size.toString(2);
		  var len = pg_size.length-1;
		  alert(len);	 
		  var x = Math.floor(Math.random()*z);
		  var y = x.toString(2);
		  y = y.toString();
		  var k = parseInt(y.slice(0,len));
		  alert(k);
		  alert(y);
		  x = x.toString(16);
		  var m = document.getElementById('hex');
		  m.value = x;
		  
		}
		function generate_page_no() {//function to generate page number
		  var z = vm/pg; 
		  var x = Math.floor(Math.random()*z);
		  var m = document.getElementById('dec');
		  m.value = x;
		}
		
		function add_vm(size){
			var temp_string="VPG-";
			var vm_id= document.getElementById("vm");
			for (var i = 0; i <size ; i++) {
				var para = document.createElement("P");
				var temp=temp_string.concat((i).toString());
				var node = document.createTextNode(temp);
				para.appendChild(node);
				vm_id.appendChild(para);
			}
		}
		function add_vpn(size){
			var temp_string="PTE ";
			var vm_id= document.getElementById("vpn");
			for (var i = 0; i <size ; i++) {
				var para = document.createElement("P");
				var temp=temp_string.concat((i).toString());
				var node = document.createTextNode(temp);
				para.appendChild(node);
				vm_id.appendChild(para);
			}
		}
		function dynamicdropdown(listindex)
	    {
	        switch (listindex)
	        {
	        case "2 KB" :
	            document.getElementById("status mm_mem").options[0]=new Option("Select");
	            document.getElementById("status mm_mem").options[1]=new Option("2 KB");
	            document.getElementById("status mm_mem").options[2]=new Option("4 KB");
	            document.getElementById("status mm_mem").options[3]=new Option("6 KB");
	            document.getElementById("status mm_mem").options[4]=new Option("8 KB");
	            document.getElementById("status mm_mem").options[5]=new Option("10 KB");
	            document.getElementById("status mm_mem").options[6]=new Option("12 KB");
	            document.getElementById("status mm_mem").options[7]=new Option("14 KB");
	            document.getElementById("status mm_mem").options[8]=new Option("16 KB");
	            document.getElementById("status mm_mem").options[9]=new Option("18 KB");
	            document.getElementById("status mm_mem").options[10]=new Option("20 KB");
	            document.getElementById("status mm_mem").options[11]=new Option("22 KB");
	            document.getElementById("status mm_mem").options[12]=new Option("24 KB");
	            document.getElementById("status mm_mem").options[13]=new Option("26 KB");
	            document.getElementById("status mm_mem").options[14]=new Option("28 KB");
	            document.getElementById("status mm_mem").options[15]=new Option("30 KB");
	            document.getElementById("status mm_mem").options[16]=new Option("32 KB");
	            document.getElementById("status vm_mem").options[0]=new Option("Select");
	            document.getElementById("status vm_mem").options[1]=new Option("2 KB");
	            document.getElementById("status vm_mem").options[2]=new Option("4 KB");
	            document.getElementById("status vm_mem").options[3]=new Option("6 KB");
	            document.getElementById("status vm_mem").options[4]=new Option("8 KB");
	            document.getElementById("status vm_mem").options[5]=new Option("10 KB");
	            document.getElementById("status vm_mem").options[6]=new Option("12 KB");
	            document.getElementById("status vm_mem").options[7]=new Option("14 KB");
	            document.getElementById("status vm_mem").options[8]=new Option("16 KB");
	            document.getElementById("status vm_mem").options[9]=new Option("18 KB");
	            document.getElementById("status vm_mem").options[10]=new Option("20 KB");
	            document.getElementById("status vm_mem").options[11]=new Option("22 KB");
	            document.getElementById("status vm_mem").options[12]=new Option("24 KB");
	            document.getElementById("status vm_mem").options[13]=new Option("26 KB");
	            document.getElementById("status vm_mem").options[14]=new Option("28 KB");
	            document.getElementById("status vm_mem").options[15]=new Option("30 KB");
	            document.getElementById("status vm_mem").options[16]=new Option("32 KB");
	            break;
	        case "4 KB" :
	            document.getElementById("status mm_mem").options[0]=new Option("Select");
	            document.getElementById("status mm_mem").options[1]=new Option("4 KB");
	            document.getElementById("status mm_mem").options[2]=new Option("8 KB");
	            document.getElementById("status mm_mem").options[3]=new Option("12 KB");
	            document.getElementById("status mm_mem").options[4]=new Option("16 KB");
	            document.getElementById("status mm_mem").options[5]=new Option("20 KB");
	            document.getElementById("status mm_mem").options[6]=new Option("24 KB");
	            document.getElementById("status mm_mem").options[7]=new Option("28 KB");
	            document.getElementById("status mm_mem").options[8]=new Option("32 KB");
	            document.getElementById("status mm_mem").options[9]=new Option("36 KB");
	            document.getElementById("status mm_mem").options[10]=new Option("40 KB");
	            document.getElementById("status mm_mem").options[11]=new Option("44 KB");
	            document.getElementById("status mm_mem").options[12]=new Option("48 KB");
	            document.getElementById("status mm_mem").options[13]=new Option("52 KB");
	            document.getElementById("status mm_mem").options[14]=new Option("56 KB");
	            document.getElementById("status mm_mem").options[15]=new Option("60 KB");
	            document.getElementById("status mm_mem").options[16]=new Option("64 KB");
	            document.getElementById("status vm_mem").options[0]=new Option("Select");
	            document.getElementById("status vm_mem").options[1]=new Option("4 KB");
	            document.getElementById("status vm_mem").options[2]=new Option("8 KB");
	            document.getElementById("status vm_mem").options[3]=new Option("12 KB");
	            document.getElementById("status vm_mem").options[4]=new Option("16 KB");
	            document.getElementById("status vm_mem").options[5]=new Option("20 KB");
	            document.getElementById("status vm_mem").options[6]=new Option("24 KB");
	            document.getElementById("status vm_mem").options[7]=new Option("28 KB");
	            document.getElementById("status vm_mem").options[8]=new Option("32 KB");
	            document.getElementById("status vm_mem").options[9]=new Option("36 KB");
	            document.getElementById("status vm_mem").options[10]=new Option("40 KB");
	            document.getElementById("status vm_mem").options[11]=new Option("44 KB");
	            document.getElementById("status vm_mem").options[12]=new Option("48 KB");
	            document.getElementById("status vm_mem").options[13]=new Option("52 KB");
	            document.getElementById("status vm_mem").options[14]=new Option("56 KB");
	            document.getElementById("status vm_mem").options[15]=new Option("60 KB");
	            document.getElementById("status vm_mem").options[16]=new Option("64 KB");
	            break;
	        case "8 KB" :
	            document.getElementById("status mm_mem").options[0]=new Option("Select");
	            document.getElementById("status mm_mem").options[1]=new Option("8 KB");
	            document.getElementById("status mm_mem").options[2]=new Option("16 KB");
	            document.getElementById("status mm_mem").options[3]=new Option("24 KB");
	            document.getElementById("status mm_mem").options[4]=new Option("32 KB");
	            document.getElementById("status mm_mem").options[5]=new Option("40 KB");
	            document.getElementById("status mm_mem").options[6]=new Option("48 KB");
	            document.getElementById("status mm_mem").options[7]=new Option("56 KB");
	            document.getElementById("status mm_mem").options[8]=new Option("64 KB");
	            document.getElementById("status mm_mem").options[9]=new Option("72 KB");
	            document.getElementById("status mm_mem").options[10]=new Option("80 KB");
	            document.getElementById("status mm_mem").options[11]=new Option("88 KB");
	            document.getElementById("status mm_mem").options[12]=new Option("96 KB");
	            document.getElementById("status mm_mem").options[13]=new Option("104 KB");
	            document.getElementById("status mm_mem").options[14]=new Option("112 KB");
	            document.getElementById("status mm_mem").options[15]=new Option("120 KB");
	            document.getElementById("status mm_mem").options[16]=new Option("128 KB");
	            document.getElementById("status vm_mem").options[0]=new Option("Select");
	            document.getElementById("status vm_mem").options[1]=new Option("8 KB");
	            document.getElementById("status vm_mem").options[2]=new Option("16 KB");
	            document.getElementById("status vm_mem").options[3]=new Option("24 KB");
	            document.getElementById("status vm_mem").options[4]=new Option("32 KB");
	            document.getElementById("status vm_mem").options[5]=new Option("40 KB");
	            document.getElementById("status vm_mem").options[6]=new Option("48 KB");
	            document.getElementById("status vm_mem").options[7]=new Option("56 KB");
	            document.getElementById("status vm_mem").options[8]=new Option("64 KB");
	            document.getElementById("status vm_mem").options[9]=new Option("72 KB");
	            document.getElementById("status vm_mem").options[10]=new Option("80 KB");
	            document.getElementById("status vm_mem").options[11]=new Option("88 KB");
	            document.getElementById("status vm_mem").options[12]=new Option("96 KB");
	            document.getElementById("status vm_mem").options[13]=new Option("104 KB");
	            document.getElementById("status vm_mem").options[14]=new Option("112 KB");
	            document.getElementById("status vm_mem").options[15]=new Option("120 KB");
	            document.getElementById("status vm_mem").options[16]=new Option("128 KB");
	            break;
	        }
	        return true;
	    }
	</script>
</head>
<body>
	<div class="one">
		<form id="field_1">
			<div class="two">
				<div class="three_1">
					<table border="0"><caption>PARAMETERS</caption>
						<tr>
							<td>Page Size</td>
							<td>
								 <select id="source" name="source" onchange="javascript: dynamicdropdown(this.options[this.selectedIndex].value);">
								 	 <option value="select">select</option>
	 								 <option value="2 KB">2 KB</option>
	 								 <option value="4 KB">4 KB</option>
	 								 <option value="8 KB">8 KB</option>
	  							 </select> 
							</td>
						</tr>
						<tr>
							<td>Main Memory</td>
							<td>
								 <script type="text/javascript" language="JavaScript">
							       document.write('<select name="status mm_mem" id="status mm_mem"><option value="">Select status</option></select>')
							      </script>
							</td>
						</tr>
						<tr>
							<td>Virtual Memory</td>
							<td>
								 <script type="text/javascript" language="JavaScript">
							       document.write('<select name="status vm_mem" id="status vm_mem"><option value="">Select status</option></select>')
							      </script>
							</td>
						</tr>
						<tr>
							<td>TLB</td>
							<td>
								 <select>
	 								 <option value="Item 1">Item 1</option>
	 								 <option value="Item 2">Item 2</option>
	 								 <option value="Item 3">Item 3</option>
	 								 <option value="Item 4">Item 4</option>
	  							 </select> 
							</td>
						</tr>
					</table>
				</div>
				<div class="three_1"><caption>REPLACEMENT POLICY</caption><br>
					<select>
	 					<option value="FIFO">FIFO</option>
	 					<option value="LIFO">LIFO</option>
	 					<option value="LRU">LRU</option>
	  				</select> 
				</div>
				<div class="three_1"><caption>PAGE LEVEL</caption>
					<select>
	 				 <option value="LEVEL ONE">LEVEL ONE</option>
	 				 <option value="LEVEL TWO">LEVEL TWO</option>
	  			    </select> 	 
				</div>
				<div class="three_1">
					<input type="button" value="Submit" onclick="get_parameters()">
				</div>
			</div>
		</form>
		<div class="two_2">
			<div class="three_2 item1">
				<table width=10%>
					<tr>
						<td><button type="button" onclick="generate()">GENERATE</button></td>
						<td><input type="text" name="Virtual address" value="virtual address" id="hex"></td>
						<td><button type="button">map</button></td>
					</tr>
					<tr>
						<td></td>
						<td><input type="radio" name="action" value="READ"> READ<br>
 					 		<input type="radio" name="action" value="WRITE"> WRITE</td>
						<td></td>
					</tr>
					<tr>
						<td><button type="button" onclick="generate_page_no()">GENERATE</button></td>
						<td><input type="text" name="Page number" value="Page number" id="dec"></td>
						<td><button type="button">map</button></td>
					</tr>
				</table>
			</div>
			<div class="three_2 item2">
				<table>
					<tr>
						<td><button type="button">OUTER</button></td>
						<td><button type="button">INNER</button></td>
						<td><button type="button">VPO</button></td>
					</tr>
					<tr>
						<td><input type="text" name="Page number" class="truncate"></td>
						<td><input type="text" name="Page number" class="truncate"></td>
						<td><input type="text" name="Page number" class="truncate"></td>
					</tr>
				</table>
			</div>
			<div class="three_2 item3">
				<button type="button">RESTART</button>
				<p>Page Miss 0</p>
				<p>Page Hit 0</p>
			</div>
			 <div class="three_2 item4">
			 	<button type="button">BASIC</button>
			 	<button type="button">UNDER THE HOOD</button><br>
			 </div>
			 <div class="three_2_2 item5">
			 	<div class="four">
			 		<button type="button" class="truncate_virtualmem">Virtual Memory</button><br>
			 		<div id="vm"></div>
			 	</div>
			 	<div class="four">
			 		<button type="button" class="truncate_mainmem">Main Memory</button>
			 		<button type="button" class="truncate">Dirty</button><br>
			 		<div id="s-1"><div id="mm"></div>
			 		<div id="dirty"></div></div>
			 	</div>
			 	<div class="four">
			 		<textarea rows="20" cols="15">EXPLANATION</textarea>
			 	</div>
			 	<div>
			 		<button type="button" class="truncate">VPN</button>
			 		<button type="button" class="truncate">At PPN</button>
			 		<button type="button" class="truncate">Valid</button><br>
			 		<div id="s-2">
			 		<div id="vpn"></div>
			 		<div id="ppn"></div>
			 		<div id="valid"></div></div>
			 	</div>

			 </div>
		</div>
		<div class="two_3">
			<div class="three_3">
				<button type="button" class="truncate_virtualmem">Virtual memory</button>
			 	<button type="button" class="truncate_mainmem">Main Memory</button>
			 	<button type="button" class="truncate_pagesize">page size</button><br>
				<textarea rows="1" cols="17" id="vm_size"></textarea>
		 		<textarea rows="1" cols="15" id="mm_size"></textarea>
		 		<textarea rows="1" cols="11" id="pg_size"></textarea>
			</div>
			<div class="three_3">
				<button type="button" class="truncate_replacementpolicy">replacement policy</button>
			 	<button type="button" class="truncate_pagelevel">page level</button><br>
				<textarea rows="1" cols="7" id="rep_policy"></textarea>
		 		<textarea rows="1" cols="7" id="pg_lvl"></textarea>
			</div>
			<div class="three_3">
				<textarea rows="30" cols="15"> Recent History</textarea>
			</div>
		</div>

	</div>
</body>
</html>